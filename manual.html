<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dpScreenOCR User Manual</title>
  <link rel="stylesheet" href="manual-data/manual.css">
</head>
<body>
<header>
<h1 class="title">dpScreenOCR User Manual</h1>
<p class="subtitle">Version 1.5.0</p>
</header>
<nav id="TOC">
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#about" id="toc-about"><span
class="toc-section-number">1</span> About</a></li>
<li><a href="#installation" id="toc-installation"><span
class="toc-section-number">2</span> Installation</a>
<ul>
<li><a href="#installing-dpscreenocr"
id="toc-installing-dpscreenocr"><span
class="toc-section-number">2.1</span> Installing dpScreenOCR</a>
<ul>
<li><a href="#unix-like-systems" id="toc-unix-like-systems"><span
class="toc-section-number">2.1.1</span> Unix-like systems</a></li>
<li><a href="#windows" id="toc-windows"><span
class="toc-section-number">2.1.2</span> Windows</a></li>
</ul></li>
<li><a href="#installing-languages" id="toc-installing-languages"><span
class="toc-section-number">2.2</span> Installing languages</a>
<ul>
<li><a href="#unix-like-systems-1" id="toc-unix-like-systems-1"><span
class="toc-section-number">2.2.1</span> Unix-like systems</a></li>
<li><a href="#windows-1" id="toc-windows-1"><span
class="toc-section-number">2.2.2</span> Windows</a></li>
</ul></li>
</ul></li>
<li><a href="#usage" id="toc-usage"><span
class="toc-section-number">3</span> Usage</a>
<ul>
<li><a href="#character-recognition"
id="toc-character-recognition"><span
class="toc-section-number">3.1</span> Character recognition</a>
<ul>
<li><a href="#split-text-blocks" id="toc-split-text-blocks"><span
class="toc-section-number">3.1.1</span> Split text blocks</a></li>
<li><a href="#languages" id="toc-languages"><span
class="toc-section-number">3.1.2</span> Languages</a></li>
<li><a href="#language-manager" id="toc-language-manager"><span
class="toc-section-number">3.1.3</span> Language manager</a></li>
</ul></li>
<li><a href="#actions" id="toc-actions"><span
class="toc-section-number">3.2</span> Actions</a>
<ul>
<li><a href="#run-executable" id="toc-run-executable"><span
class="toc-section-number">3.2.1</span> Run executable</a></li>
</ul></li>
<li><a href="#hotkey" id="toc-hotkey"><span
class="toc-section-number">3.3</span> Hotkey</a></li>
<li><a href="#checking-for-updates" id="toc-checking-for-updates"><span
class="toc-section-number">3.4</span> Checking for updates</a></li>
</ul></li>
<li><a href="#command-line-options" id="toc-command-line-options"><span
class="toc-section-number">4</span> Command-line options</a></li>
<li><a href="#program-files" id="toc-program-files"><span
class="toc-section-number">5</span> Program files</a>
<ul>
<li><a href="#configuration-files" id="toc-configuration-files"><span
class="toc-section-number">5.1</span> Configuration files</a></li>
<li><a href="#data-files" id="toc-data-files"><span
class="toc-section-number">5.2</span> Data files</a></li>
</ul></li>
<li><a href="#tweaking" id="toc-tweaking"><span
class="toc-section-number">6</span> Tweaking</a></li>
<li><a href="#troubleshooting" id="toc-troubleshooting"><span
class="toc-section-number">7</span> Troubleshooting</a></li>
</ul>
</nav>
<h1 data-number="1" id="about"><span
class="header-section-number">1</span> About</h1>
<p>dpScreenOCR is a free and open-source program to recognize text on
the screen. Powered by <a
href="https://en.wikipedia.org/wiki/Tesseract_(software)">Tesseract</a>,
it supports more than 100 languages and can split independent text
blocks, such as columns.</p>
<h1 data-number="2" id="installation"><span
class="header-section-number">2</span> Installation</h1>
<h2 data-number="2.1" id="installing-dpscreenocr"><span
class="header-section-number">2.1</span> Installing dpScreenOCR</h2>
<h3 data-number="2.1.1" id="unix-like-systems"><span
class="header-section-number">2.1.1</span> Unix-like systems</h3>
<h4 data-number="2.1.1.1" id="package-manager"><span
class="header-section-number">2.1.1.1</span> Package manager</h4>
<p>The usual way to install dpScreenOCR on Unix-like systems is to use
the package manager. If the program is not available in your package
manager, the <a href="https://danpla.github.io/dpscreenocr">official
website</a> provides repositories for some systems, including Debian,
Ubuntu, and derivatives. If yours is not one of them, consider the
TAR.XZ archive or build the program from source.</p>
<h4 data-number="2.1.1.2" id="tar.xz-archive"><span
class="header-section-number">2.1.1.2</span> TAR.XZ archive</h4>
<p>You can download dpScreenOCR as a self-contained directory in a
TAR.XZ archive. It has several advantages over the package manager
version:</p>
<ul>
<li><p>Doesn’t need to be installed: just unpack the TAR.XZ archive
anywhere and run <code>dpscreenocr</code>.</p></li>
<li><p>Works on most distributions, including legacy systems released
around 2014 or later.</p></li>
<li><p>Provides the latest version of Tesseract, while in the package
manager it may be out of date.</p></li>
<li><p>Has a <a href="#language-manager">language manager</a> that
allows you to install and remove languages without leaving
dpScreenOCR.</p></li>
</ul>
<h4 data-number="2.1.1.3" id="build-from-source"><span
class="header-section-number">2.1.1.3</span> Build from source</h4>
<p>To build dpScreenOCR manually, download the source code tarball,
unpack it, and follow the instructions in “doc/building-unix.txt”.</p>
<h3 data-number="2.1.2" id="windows"><span
class="header-section-number">2.1.2</span> Windows</h3>
<p>The <a href="https://danpla.github.io/dpscreenocr">dpScreenOCR
website</a> provides an installer and a ZIP archive. The latter doesn’t
need installation: unpack it anywhere and run dpscreenocr.exe.</p>
<p>Both versions are identical. In particular, the ZIP variant is not a
so-called <a
href="https://en.wikipedia.org/wiki/Portable_application">portable
application</a>: it stores its configuration and other files in <a
href="#program-files">the same directories</a> as the installer
version.</p>
<h2 data-number="2.2" id="installing-languages"><span
class="header-section-number">2.2</span> Installing languages</h2>
<h3 data-number="2.2.1" id="unix-like-systems-1"><span
class="header-section-number">2.2.1</span> Unix-like systems</h3>
<p>On Unix-like systems, the language installation process differs
depending on whether dpScreenOCR was obtained from the package manager
or as a TAR.XZ archive. Languages installed for the former will not be
visible in the latter, and vice versa.</p>
<p>The TAR.XZ version of dpScreenOCR is shipped with the English
language pack. To install other languages, use the language manager as
described in the “<a href="#language-manager">Language manager</a>”
section.</p>
<p>If you installed dpScreenOCR using the package manager, you should
also use the package manager to get the languages for Tesseract. Package
names can vary from system to system, but they usually start with
“tesseract” and end with a language code or name. For example, the
package for German has the following names:</p>
<ul>
<li>“tesseract-ocr-deu” on Debian, Ubuntu, and derivatives</li>
<li>“tesseract-data-deu” on Arch Linux</li>
<li>“tesseract-langpack-deu” on Fedora</li>
<li>“tesseract-ocr-traineddata-german” on openSUSE</li>
</ul>
<p>dpScreenOCR does not use the “osd” (automatic script and orientation
detection) and “equ” (math and equation detection) packages.</p>
<h3 data-number="2.2.2" id="windows-1"><span
class="header-section-number">2.2.2</span> Windows</h3>
<p>dpScreenOCR for Windows is shipped with the English language pack. To
install other languages, use the language manager as described in the
“<a href="#language-manager">Language manager</a>” section.</p>
<h1 data-number="3" id="usage"><span
class="header-section-number">3</span> Usage</h1>
<p>dpScreenOCR is easy to use:</p>
<ol type="1">
<li>Select languages and actions from the Main tab.</li>
<li>Move the mouse pointer to the area of the screen containing text and
press the hotkey shown in the status text of the Main tab to start the
selection.</li>
<li>Move the mouse so that the selection covers the text and press the
hotkey again.</li>
</ol>
<p>After these steps, dpScreenOCR will recognize the text from the
selected area and process it according to the selected actions.</p>
<h2 data-number="3.1" id="character-recognition"><span
class="header-section-number">3.1</span> Character recognition</h2>
<h3 data-number="3.1.1" id="split-text-blocks"><span
class="header-section-number">3.1.1</span> Split text blocks</h3>
<p>If this option is enabled, dpScreenOCR tries to split independent
text blocks, such as columns. Otherwise, the text is treated as one
continuous block. This behavior is best illustrated by the following
image, which shows a two-column text layout (A) recognized with (B) and
without (C) the “Split text blocks” option:</p>
<p><img src="manual-data/split.svg" /></p>
<p>dpScreenOCR always detects and separates paragraphs within text
blocks, regardless of whether this option is enabled.</p>
<h3 data-number="3.1.2" id="languages"><span
class="header-section-number">3.1.2</span> Languages</h3>
<p>This is the list of languages that dpScreenOCR can use to recognize
text. You can select more than one, but be aware that this may slow down
recognition and reduce its accuracy.</p>
<h3 data-number="3.1.3" id="language-manager"><span
class="header-section-number">3.1.3</span> Language manager</h3>
<p>The language manager allows you to install, update, and remove
languages. On Unix-like systems it’s only available in the TAR.XZ
version of dpScreenOCR, otherwise you can handle languages through the
system package manager as described in the “<a
href="#installing-languages">Installing languages</a>” section.</p>
<p>When you open the manager, it tries to retrieve the list of available
languages from the Internet. If this fails (e.g., if there is no network
connection), you can still remove languages using the corresponding
tab.</p>
<h2 data-number="3.2" id="actions"><span
class="header-section-number">3.2</span> Actions</h2>
<p>The Actions group lets you choose what to do with the recognized
text: copy it to the clipboard, add it to the history (located in the
corresponding tab), or pass it as an argument to an executable.</p>
<h3 data-number="3.2.1" id="run-executable"><span
class="header-section-number">3.2.1</span> Run executable</h3>
<p>The “Run executable” action runs an executable with the recognized
text as the first argument. The text entry expects either an absolute
path to the executable, or just its name if it is located in one of the
directories listed in the PATH environment variable.</p>
<h4 data-number="3.2.1.1"
id="running-scripts-on-unix-like-systems"><span
class="header-section-number">3.2.1.1</span> Running scripts on
Unix-like systems</h4>
<p>Running scripts on Unix-like systems doesn’t require any special
setup beyond the two standard requirements: make sure the script starts
with a proper <a
href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a>, and
that you have the execute permission (run
<code>chmod +x your_script</code>).</p>
<p>Here is an example Unix shell script that translates the recognized
text to your native language using <a
href="https://www.soimort.org/translate-shell/">Translate Shell</a> and
displays the translation as a desktop notification.</p>
<pre><code>#!/bin/sh

notify-send &quot;Translation&quot; &quot;$(trans -b &quot;$1&quot;)&quot;</code></pre>
<h4 data-number="3.2.1.2" id="running-scripts-on-windows"><span
class="header-section-number">3.2.1.2</span> Running scripts on
Windows</h4>
<h5 data-number="3.2.1.2.1" id="batch-files"><span
class="header-section-number">3.2.1.2.1</span> Batch files</h5>
<p>dpScreenOCR doesn’t run batch files (“.bat” or “.cmd”) because
there’s no way to safely pass arbitrary text to them. Please use another
scripting language instead.</p>
<h5 data-number="3.2.1.2.2" id="creating-file-associations"><span
class="header-section-number">3.2.1.2.2</span> Creating file
associations</h5>
<p>Before using a script, make sure that the file association is
configured correctly so that you can run the script by its filename
alone, without explicitly mentioning the interpreter. The easiest way to
test this is to type the name of the script with some arguments in
cmd.exe. If the script runs and receives all arguments, you can skip
this section.</p>
<p>We will use Python as an example, but for other languages the process
is similar. Open cmd.exe as an administrator and run asscoc with the
script file extension as an argument:</p>
<pre><code>&gt; assoc .py</code></pre>
<ul>
<li><p>If the association doesn’t exist, create a new one:</p>
<pre><code>&gt; assoc .py=Python.File
&gt; ftype Python.File=&quot;C:\Windows\py.exe&quot; &quot;%L&quot; %*</code></pre></li>
<li><p>If the association exists (assoc prints something like
<code>.py=Python.File</code>), run ftype to see what command is
used:</p>
<pre><code>&gt; ftype Python.File
Python.File=&quot;C:\Windows\py.exe&quot; &quot;%L&quot; %*</code></pre>
<p>If the command doesn’t end with <code>%*</code>, fix it:</p>
<pre><code>&gt; ftype Python.File=&quot;C:\Windows\py.exe&quot; &quot;%L&quot; %*</code></pre></li>
</ul>
<p>If the script still receives only one argument (the script path),
this means that Windows actually uses a different association for the
given extension and ignores the one set with assoc/ftype. To fix this,
open regedit and make sure that the values of the following keys use the
correct path to the Python executable and end with <code>%*</code>:</p>
<pre><code>HKEY_CLASSES_ROOT\Applications\python.exe\shell\open\command
HKEY_CLASSES_ROOT\py_auto_file\shell\open\command</code></pre>
<p>A tip for Python users: note that in the examples above the
association uses Python Launcher (py.exe) rather than a specific Python
executable (python.exe). This allows using <a
href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a> lines to
select the Python version for each script. For more information, see “<a
href="https://docs.python.org/3/using/windows.html">Using Python on
Windows</a>”.</p>
<h5 data-number="3.2.1.2.3" id="hiding-console-window"><span
class="header-section-number">3.2.1.2.3</span> Hiding console
window</h5>
<p>Most scripting language interpreters for Windows come with a special
version of the executable that doesn’t show the console window. For
example, this is pyw.exe for Python.</p>
<p>The interpreter installer usually adds a special file association
that allows you to hide the console window by changing the script
extension (for example, to “.pyw” for Python). If such an association
does not exist, you can create it as described in the previous
section.</p>
<h2 data-number="3.3" id="hotkey"><span
class="header-section-number">3.3</span> Hotkey</h2>
<p>The hotkey starts and ends the on-screen selection. The first time
you press it, a selection rectangle appears on your screen. Move the
mouse so that the rectangle covers an area with text, then press the
hotkey again to send the selected area for recognition. To cancel the
selection, press Escape.</p>
<p>The hotkey is global: it works even if the dpScreenOCR window is
minimized. If pressing the hotkey has no effect, it probably means that
another program is already using it. In this case, try another key
combination.</p>
<h2 data-number="3.4" id="checking-for-updates"><span
class="header-section-number">3.4</span> Checking for updates</h2>
<p>If “Check for updates automatically” is enabled in the “Settings”
tab, dpScreenOCR will check for new program versions at startup, but no
more often than once a week. You can also check for updates manually
using the “Check for updates” button in the “About” tab.</p>
<h1 data-number="4" id="command-line-options"><span
class="header-section-number">4</span> Command-line options</h1>
<p>Since version 1.5, dpScreenOCR supports several command-line options.
Use <code>-help</code> to see them all.</p>
<h1 data-number="5" id="program-files"><span
class="header-section-number">5</span> Program files</h1>
<p>This section describes what files dpScreenOCR stores on your system
and where to find them.</p>
<h2 data-number="5.1" id="configuration-files"><span
class="header-section-number">5.1</span> Configuration files</h2>
<p>Configuration files are located in the following directory:</p>
<ul>
<li><p>Unix-like systems: <code>$XDG_CONFIG_HOME/dpscreenocr</code> if
the XDG_CONFIG_HOME environment variable is set,
<code>~/.config/dpscreenocr</code> otherwise.</p></li>
<li><p>Windows: <code>%LOCALAPPDATA%\dpscreenocr</code></p>
<p>To quickly navigate to this folder, you can paste this path into
“Run” (press Windows + R) or into the folder address bar of File
Explorer. <code>%LOCALAPPDATA%</code> is an environment variable that
usually refers to
<code>C:\Users\(your name)\AppData\Local\</code>.</p></li>
</ul>
<p>Configuration files include:</p>
<ul>
<li><p>settings.cfg, where dpScreenOCR stores all its settings. You can
edit this file as described in the “<a href="#tweaking">Tweaking</a>”
section to customize advanced options.</p></li>
<li><p>history.txt, which stores the contents of the “History” tab.
Despite the “.txt” extension, it is strongly discouraged to modify this
file as it has a strict structure that can be easily broken.</p></li>
</ul>
<h2 data-number="5.2" id="data-files"><span
class="header-section-number">5.2</span> Data files</h2>
<p>Data files are located in the following directory:</p>
<ul>
<li><p>Unix-like systems: <code>$XDG_DATA_HOME/dpscreenocr</code> if the
XDG_DATA_HOME environment variable is set,
<code>~/.local/share/dpscreenocr</code> otherwise.</p></li>
<li><p>Windows: the same directory as for the configuration
files.</p></li>
</ul>
<p>Data files include the languages installed via the <a
href="#language-manager">language manager</a>. For Tesseract, they are
located in the “tesseract_N_data” subdirectory, where N is the Tesseract
version number. You can add your own “.traineddata” files here (e.g.,
downloaded from the <a
href="https://danpla.github.io/dpscreenocr/languages">Languages</a>
page, <a
href="https://github.com/tesseract-ocr/tessdata_best">tessdata_best</a>,
or elsewhere on the Internet).</p>
<p>“.sha256” files contain SHA-256 checksums of the corresponding
“.traineddata” files, in the same format as generated by the sha256sum
utility with the <code>--binary</code> flag. dpScreenOCR uses them to
check if a language file is out of date. You don’t have to create them
manually when adding your “.traineddata” files.</p>
<h1 data-number="6" id="tweaking"><span
class="header-section-number">6</span> Tweaking</h1>
<p>This section describes how to change some settings that are not
available in the dpScreenOCR interface.</p>
<p>The settings are stored in the settings.cfg file located in the
configuration files directory (see the “<a href="#program-files">Program
files</a>” section for where to find it). dpScreenOCR overwrites the
settings on exit, so be sure to close the program before editing this
file.</p>
<p>Each line in settings.cfg contains an option as a key-value pair. A
value is a string that, depending on the option, represents a boolean
(<code>true</code> or <code>false</code>), number (like <code>10</code>
or <code>-5</code>), file path, etc. Values can contain the following
escape sequences:</p>
<ul>
<li><code>\n</code> - line feed</li>
<li><code>\r</code> - carriage return</li>
<li><code>\t</code> - tabulation</li>
</ul>
<p>Any other character preceded by <code>\</code> is kept as is. To
preserve leading spaces, escape the first one with <code>\</code>; to
preserve trailing spaces, put <code>\</code> at the end of the line.</p>
<p>To reset an option to its default value, remove it from settings.cfg;
to reset all options, clear or delete the file.</p>
<p>Here is a list of options that can only be changed by editing the
settings file:</p>
<ul>
<li><p><code>action_copy_to_clipboard_text_separator</code>
(<code>\n\n\n</code> by default) the separator to insert between
recognized texts when the “Copy text to clipboard” action gets several
of them at once. This option is only effective if
<code>ocr_allow_queuing</code> is enabled.</p></li>
<li><p><code>history_wrap_words</code> (<code>true</code> by default)
whether to break long lines of text in the history so you don’t have to
scroll horizontally.</p></li>
<li><p><code>hotkey_cancel_selection</code> (<code>Escape</code> by
default) the hotkey to cancel selection.</p></li>
<li><p><code>ocr_allow_queuing</code> (<code>true</code> by default)
allows you to queue a new selection for recognition without waiting for
the previous one to complete.</p>
<p>If this option is disabled, pressing the hotkey will have no effect
until the recognition is finished. If this option is enabled, the “Copy
text to clipboard” action can get several recognized texts at once, in
which case they will be joined using
<code>action_copy_to_clipboard_text_separator</code> as a
separator.</p></li>
<li><p><code>selection_border_width</code> (<code>3</code> by default)
the width of the selection border.</p>
<p>Depending on the platform, this width can be scaled proportionally to
DPI, which can be the physical DPI of the display, the virtual DPI set
by global interface/font scale settings, or a combination of
both.</p></li>
<li><p><code>ui_window_minimize_on_start</code> (<code>false</code> by
default) whether to minimize the window on program startup.</p>
<p>In dpScreenOCR versions prior to 1.5, this option was useful in
combination with <code>ui_window_minimize_to_tray</code> when adding the
program to the autostart. Now that the program has the “Run at system
logon” setting and the <code>-hide</code> command-line option,
<code>ui_window_minimize_on_start</code> is only kept for backward
compatibility.</p></li>
<li><p><code>update_check_auto_interval_days</code> (<code>7</code> by
default) the interval, in days, between the automatic update
checks.</p></li>
</ul>
<h1 data-number="7" id="troubleshooting"><span
class="header-section-number">7</span> Troubleshooting</h1>
<p>This section contains a list of common issues and their solutions. If
the solution doesn’t help, or you have a problem that is not listed
here, please report it on the <a
href="https://github.com/danpla/dpscreenocr/issues">issue tracker</a>.
You can also contact the author by email using the link at the bottom of
the <a href="https://danpla.github.io/dpscreenocr">dpScreenOCR
website</a>.</p>
<ul>
<li><p><strong>Recognized text contains garbage</strong></p>
<p>Make sure that you use the minimal set of languages needed to
recognize the text. Don’t enable languages just in case: this will
dramatically reduce the accuracy of recognition.</p></li>
<li><p><strong>Pressing the hotkey has no effect</strong></p>
<p>This hotkey is probably used by another program. Try to choose
another key combination.</p></li>
<li><p><strong>“Run executable” has no effect</strong></p>
<ul>
<li><p>Make sure that the “Run executable” text entry contains either an
absolute path to the executable, or just the name of the executable that
is located in one of the directories listed in the PATH environment
variable.</p></li>
<li><p>(Unix) Make sure you have the execute permission. Run
<code>chmod +x executable</code>.</p></li>
<li><p>(Unix) If your executable is a script, make sure it starts with a
proper <a
href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a>.</p></li>
<li><p>(Windows) Are you trying to use a batch file (“.bat” or “.cmd”)?
This is not allowed because there is no way to safely pass arbitrary
text to them. Please use another scripting language instead.</p></li>
</ul></li>
<li><p><strong>(Unix) “Wayland is not supported. Please switch to the
X11/Xorg session”</strong></p>
<p>You need to switch to the X11/Xorg session, as dpScreenOCR doesn’t
work with Wayland yet. In most desktop environments, you can do this
from a dedicated menu (sometimes hidden under a gear button) when the
login screen asks for the password.</p></li>
<li><p><strong>(Unix) No languages</strong></p>
<p>Make sure that the TESSDATA_PREFIX environment variable is either not
set or points to a directory with “.traineddata” files.</p></li>
<li><p><strong>(Windows) “Run executable” opens the script in a text
editor</strong></p>
<p>Create a file association as described in “<a
href="#creating-file-associations">Creating file
associations</a>”.</p></li>
<li><p><strong>(Windows) “Run executable” runs the script without an
argument</strong></p>
<p>Make sure that the file association ends with <code>%*</code>. See
“<a href="#creating-file-associations">Creating file associations</a>”
for details.</p></li>
</ul>
</body>
</html>
