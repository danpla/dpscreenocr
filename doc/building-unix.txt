Dependencies
============

Required:

  * C++ compiler with C++11 support
  * CMake 2.8.12 or newer
  * Make
  * Qt 4 or 5
  * libtesseract
  * libx11
  * libxext - for X11 Nonrectangular Window Shape Extension

Optional:

  * pkg-config - to find Tesseract. If pkg-config is not installed, or
    if you have an old Tesseract version that comes without a .pc file
    for pkg-config, the include directory will be "/usr/include" and
    the library name is "libtesseract".

  * Qt 5 X11 extras - to fix a window title bug in Qt 5 < 5.3.2.

  * libintl - for translated user interface; DPSO_ENABLE_NLS CMake
    option. On some systems libintl is a part of GNU C library and
    doesn't need to be installed separately.

  * gettext utilities - msgfmt is needed to compile gettext message
    catalogs; DPSO_ENABLE_NLS CMake option.

  * pandoc - to generate HTML manual; DPSO_GEN_HTML_MANUAL CMake
    option.

To install dependencies on Debian, Ubuntu, and derivatives, run:

    sudo apt-get install cmake make pkg-config g++ qtbase5-dev \
        libqt5x11extras5-dev libtesseract-dev libx11-dev libxext-dev \
        gettext pandoc


Building
========

You can build dpScreenOCR with the following commands:

    cd path_to_dpscreenocr_source
    mkdir build
    cd build
    cmake -G "Unix Makefiles" -DCMAKE_BUILD_TYPE=Release ..
    make

You can configure the build with various CMake options; run
"cmake -LH .." to see them all. Options specific to dpScreenOCR have
the "DPSO_" prefix; the most interesting on Unix-like systems are:

  * DPSO_ENABLE_NLS (ON by default) enables native language support
    (translated user interface).

    This option requires gettext runtime library (libintl) and tools
    (namely, msgfmt to compile gettext catalogs). On some systems
    libintl is a part of GNU C library and doesn't need to be
    installed separately.

  * DPSO_QT_LOCAL_DATA (ON by default) allows to load data (like icons
    and localization files) from the executable's directory.

    In general, local data has higher priority than global. Icons are
    an exception: globally installed icons have higher priority to
    allow the desktop icon theme to override local icons.

    It makes sense to disable this option unless you want to use
    dpScreenOCR without installation. See the "Using uninstalled"
    section below for more information.

  * DPSO_QT_X11_SET_WINDOW_TITLE_WORKAROUND (ON by default) enables a
    workaround for a bug in Qt 5 < 5.3.2. Requires Qt 5 X11 extras.
    This option is ignored if Qt 5 >= 5.3.2.

    As the name implies, the bug affects changing of the main window
    title: it's not updated if you don't interact with the window, in
    particular, while the window is minimized.


Installing
==========

You can install and remove dpScreenOCR using the standard Make
commands "make install" and "make uninstall". To choose the
installation prefix, set the CMAKE_INSTALL_PREFIX at the build stage.
The default prefix is "/usr/local".

When built with the DPSO_QT_LOCAL_DATA option enabled, dpScreenOCR
doesn't need installation: you can use the program by simply running
the executable. However, if you want to move it from the "build"
directory to a different location, don't forget to move "icons" and
"locale" directories as well (the latter is only created if
DPSO_ENABLE_NLS was enabled).
